<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Using ButterLib's Crash Dump - BUTR Documentation</title><meta name=generator content="Hugo 0.107.0"><link href=https://butr.github.io/documentation//index.xml rel=alternate type=application/rss+xml><link rel=canonical href=https://butr.github.io/documentation/advanced/using-butterlib-crash-dump/><link rel=stylesheet href=https://butr.github.io/documentation/css/theme.min.css><script src=https://use.fontawesome.com/releases/v5.0.6/js/all.js></script>
<link rel=stylesheet href=https://butr.github.io/documentation/css/chroma.min.css><script src=https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script>
<script src=https://butr.github.io/documentation/js/bundle.js></script><style>:root{}</style><meta property="og:title" content="Using ButterLib's Crash Dump"><meta property="og:description" content="Introduction Both the Vanilla Game and ButterLib provide dump (.dmp) files that modders can use to open in Visual Studio and see both the stacktrace, threads and stack variables to get more info about a crash.
How to Get a Dump The game creates a dump file at C:\ProgramData\Mount and Blade II Bannerlord\crashes after agreeing with the game prompt to send to the developers the crash report. The dump is fairly big, because it has a lot of flags by default:"><meta property="og:type" content="article"><meta property="og:url" content="https://butr.github.io/documentation/advanced/using-butterlib-crash-dump/"><meta property="og:image" content="https://butr.github.io/documentation/images/og-image.png"><meta property="article:section" content="advanced"><meta property="article:published_time" content="2022-10-23T17:12:00+03:00"><meta property="article:modified_time" content="2022-10-23T17:12:00+03:00"><meta property="og:site_name" content="BUTR Documentation"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://butr.github.io/documentation/images/og-image.png"><meta name=twitter:title content="Using ButterLib's Crash Dump"><meta name=twitter:description content="Introduction Both the Vanilla Game and ButterLib provide dump (.dmp) files that modders can use to open in Visual Studio and see both the stacktrace, threads and stack variables to get more info about a crash.
How to Get a Dump The game creates a dump file at C:\ProgramData\Mount and Blade II Bannerlord\crashes after agreeing with the game prompt to send to the developers the crash report. The dump is fairly big, because it has a lot of flags by default:"><meta itemprop=name content="Using ButterLib's Crash Dump"><meta itemprop=description content="Introduction Both the Vanilla Game and ButterLib provide dump (.dmp) files that modders can use to open in Visual Studio and see both the stacktrace, threads and stack variables to get more info about a crash.
How to Get a Dump The game creates a dump file at C:\ProgramData\Mount and Blade II Bannerlord\crashes after agreeing with the game prompt to send to the developers the crash report. The dump is fairly big, because it has a lot of flags by default:"><meta itemprop=datePublished content="2022-10-23T17:12:00+03:00"><meta itemprop=dateModified content="2022-10-23T17:12:00+03:00"><meta itemprop=wordCount content="250"><meta itemprop=image content="https://butr.github.io/documentation/images/og-image.png"><meta itemprop=keywords content></head><body><div class=container><header><h1>BUTR Documentation</h1><a href=https://github.com/butr/documentation class=github><i class="fab fa-github"></i></a></header><div class=content-container><main><h1>Using ButterLib's Crash Dump</h1><h2 id=introduction>Introduction</h2><p>Both the Vanilla Game and ButterLib provide <a href=https://en.wikipedia.org/wiki/Core_dump>dump (.dmp) files</a> that modders can use to open in Visual Studio and see both the stacktrace, threads and stack variables to get more info about a crash.</p><h2 id=how-to-get-a-dump>How to Get a Dump</h2><p>The game creates a dump file at <strong>C:\ProgramData\Mount and Blade II Bannerlord\crashes</strong> after agreeing with the game prompt to send to the developers the crash report.
The dump is fairly big, because it has a lot of flags by default:</p><pre tabindex=0><code>MiniDumpWithDataSegs | MiniDumpWithHandleData | MiniDumpScanMemory | MiniDumpWithUnloadedModules | MiniDumpWithIndirectlyReferencedMemory | MiniDumpWithProcessThreadData | MiniDumpWithFullMemoryInfo | MiniDumpWithThreadInfo | MiniDumpWithFullAuxiliaryState | MiniDumpIgnoreInaccessibleMemory | MiniDumpWithTokenInformation | MiniDumpWithModuleHeaders
</code></pre><p>ButterLib generates a dump file inside the crash report only when the report is saved locally as a file.
When the html file is opened, a button appears <code>Get Minidump</code> that will save the dump as a separate file. Out flags are:</p><pre tabindex=0><code>MiniDumpFilterModulePaths | MiniDumpWithIndirectlyReferencedMemory | MiniDumpScanMemory
</code></pre><h2 id=analyzing-the-dump>Analyzing the Dump</h2><p>After opening the dump in Visual Studio, you won&rsquo;t get any useful data first.
This is because we need to start a debug session (Debug with Managed Only) and show VS where both the .dll and .pdb (symbols) files are.<br><img src=https://media.discordapp.net/attachments/423816778276274176/1033743972226580490/unknown.png alt=https://media.discordapp.net/attachments/423816778276274176/1033743972226580490/unknown.png></p><p>The game doesn&rsquo;t provide the .pdb files, but they can be created by ILSpy and JetBrains dotPeek.
Open the .dll files there and when right clicking on the file a prompt about creating a .pdb file should appear.
<img src=https://media.discordapp.net/attachments/423816778276274176/1033744427677659367/unknown.png alt=https://media.discordapp.net/attachments/423816778276274176/1033744427677659367/unknown.png></p><p>After that, link VS to them and you should have a standard exception window with the source code!
<img src=https://media.discordapp.net/attachments/423816778276274176/1033744073376419921/unknown.png alt=https://media.discordapp.net/attachments/423816778276274176/1033744073376419921/unknown.png></p><div class=edit-meta>Last updated on 23 Oct 2022<br>Published on 23 Oct 2022<br><a href=https://github.com/butr/documentation/edit/master/advanced/using-butterlib-crash-dump.md class=edit-page><i class="fas fa-pen-square"></i>&nbsp;Edit on GitHub</a></div><nav class=pagination><a class="nav nav-prev" href=https://butr.github.io/documentation/advanced/using-taleworld-crash-dump/ title="Using TaleWorld's Crash Dump"><i class="fas fa-arrow-left" aria-hidden=true></i>&nbsp;Prev - Using TaleWorld's Crash Dump</a>
<a class="nav nav-next" href=https://butr.github.io/documentation/advanced/advanced-analytics-crash-reports/ title="Advanced Stacktrace Analytics of Crash Reports">Next - Advanced Stacktrace Analytics of Crash Reports <i class="fas fa-arrow-right" aria-hidden=true></i></a></nav><footer><p class=powered>Powered by <a href=https://gohugo.io>Hugo</a>. Theme by <a href=https://themes.gohugo.io/hugo-theme-techdoc/>TechDoc</a>. Designed by <a href=https://github.com/thingsym/hugo-theme-techdoc>Thingsym</a>.</p></footer></main><div class=sidebar><nav class=open-menu><ul><li><a href=https://butr.github.io/documentation/>Home</a></li><li class=parent><a href=https://butr.github.io/documentation/advanced/>Advanced</a><ul class=sub-menu><li><a href=https://butr.github.io/documentation/advanced/publishing-on-github/>Publishing Mods on GitHub Actions (NexusMods, Steam Workshop, NuGet)</a></li><li><a href=https://butr.github.io/documentation/advanced/disabling-parts-of-external-functions/>Disabling Parts of External Functions</a></li><li><a href=https://butr.github.io/documentation/advanced/using-taleworld-crash-dump/>Using TaleWorld's Crash Dump</a></li><li class=active><a href=https://butr.github.io/documentation/advanced/using-butterlib-crash-dump/>Using ButterLib's Crash Dump</a></li><li><a href=https://butr.github.io/documentation/advanced/advanced-analytics-crash-reports/>Advanced Stacktrace Analytics of Crash Reports</a></li><li><a href=https://butr.github.io/documentation/advanced/switching-from-membertinfo-to-accesstools2/>Switching from MemberInfo to AccessTools2</a></li><li><a href=https://butr.github.io/documentation/advanced/type-wrapping/>Type Wrapping</a></li></ul></li></ul></nav><div class=sidebar-footer></div></div></div><a href=# id=backtothetop-fixed class=backtothetop data-backtothetop-duration=600 data-backtothetop-easing=easeOutQuart data-backtothetop-fixed-fadein=1000 data-backtothetop-fixed-fadeout=1000 data-backtothetop-fixed-bottom=10 data-backtothetop-fixed-right=20><span class="fa-layers fa-fw"><i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i></span></a></div></body></html>